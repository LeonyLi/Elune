upstream razor {
    server 127.0.0.1:9000;
}

server
    {
        listen 80;
        #listen [::]:80;
        server_name elune.fuli.news;
        #return 301 https://s.fuli.news$request_uri;
        
        gzip on;
        gzip_disable "MSIE [1-6]\.";
        gzip_comp_level 5;
        gzip_vary on;
        gzip_min_length 1000;
        gzip_proxied any;
        gzip_types application/x-javascript text/css application/javascript text/javascript text/plain text/xml application/json application/vnd.ms-fontobject application/x-font-opentype application/x-font-truetype application/x-font-ttf application/xml font/eot font/opentype font/otf image/svg+xml image/vnd.microsoft.icon;
        gzip_buffers 16 8k;
        client_max_body_size 8M;
        
        location / {
            proxy_pass http://razor;
            proxy_http_version 1.1;
            proxy_set_header   Host               $http_host;
            proxy_set_header   X-Real-IP          $remote_addr;
            proxy_set_header   X-Forwarded-For    $proxy_add_x_forwarded_for;
            proxy_set_header   X-Forwarded-Proto  $scheme;
            proxy_set_header   X-NginX-Proxy    true;
            proxy_connect_timeout      2;
            proxy_buffer_size          4k;
            proxy_buffers              4 32k;
            proxy_busy_buffers_size    64k;
            proxy_temp_file_write_size 64k;
            proxy_temp_path            /etc/nginx/proxy_temp;
            proxy_send_timeout 600;
            proxy_read_timeout 600;

            access_log  /home/wwwlogs/elune.fuli.news.log;
        }
    }